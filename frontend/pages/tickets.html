<div class="directory-page-wrapper min-h-screen py-12 px-4 relative overflow-hidden">
    
    <div class="scenic-bg">
        <div class="hill hill-1"></div>
        <div class="bullet-train-container">
            <div class="bullet-train">
                <div class="train-head"></div>
                <div class="speed-lines"></div>
            </div>
        </div>
    </div>

    <div class="max-w-5xl mx-auto main-wrapper relative z-10">

        <div class="flex items-center justify-between mb-8">
            <div>
                <h1 class="text-3xl font-black text-slate-900 tracking-tight drop-shadow-sm">Ticket Directory</h1>
                <p class="text-sm text-slate-600 mt-1 font-medium">Search and manage train ticket records</p>
            </div>
            <a href="/home" data-link class="inline-flex items-center gap-2 px-4 py-2 text-sm font-bold
                rounded-lg border border-slate-200 bg-white/60 text-slate-700
                hover:bg-white/80 transition shadow-sm">
                ← Back to Home
            </a>
        </div>

        <div class="bg-white/40 backdrop-blur-md p-5 rounded-2xl border border-white shadow-lg shadow-blue-900/5 mb-6">
            <div class="flex flex-col gap-4">

                <div class="flex flex-col lg:flex-row lg:items-center gap-3">

                    <div class="w-full lg:w-80 relative">
                        <i class="fa-solid fa-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm"></i>
                        <input id="searchInput" type="text" placeholder="Search by name / source / year..." 
                            class="w-full h-10 border border-slate-200 rounded-lg pl-9 pr-3 text-sm bg-white/60 focus:outline-none focus:ring-2 focus:ring-blue-200 transition" />
                    </div>

                    <div class="flex flex-col sm:flex-row gap-3 w-full lg:w-auto">

                        <div class="relative w-full sm:w-48">
                            <i class="fa-solid fa-arrow-down-a-z absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm"></i>
                            <select id="sortBy" class="w-full h-10 border border-slate-200 rounded-lg pl-9 pr-3 text-sm bg-white/60 focus:outline-none appearance-none cursor-pointer">
                                <option value="id">Sort: ID</option>
                                <option value="name">Sort: Name</option>
                                <option value="year">Sort: Booking</option>
                            </select>
                        </div>

                        <div class="relative w-full sm:w-32">
                            <i class="fa-solid fa-up-down absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm"></i>
                            <select id="sortDir" class="w-full h-10 border border-slate-200 rounded-lg pl-9 pr-3 text-sm bg-white/60 focus:outline-none appearance-none cursor-pointer">
                                <option value="asc">Asc ↑</option>
                                <option value="desc">Desc ↓</option>
                            </select>
                        </div>

                    </div>

                    <div class="flex gap-2 w-full lg:w-auto lg:ml-auto">
                        <button id="exportCsvBtn" class="h-10 px-4 rounded-lg border border-slate-200 bg-white/80 text-sm text-slate-700
                                inline-flex items-center gap-2 justify-center whitespace-nowrap hover:bg-white transition font-bold shadow-sm">
                            <i class="fa-solid fa-file-csv text-green-600 text-base"></i>
                            CSV
                        </button>

                        <button id="exportPdfBtn" class="h-10 px-4 rounded-lg bg-blue-600 text-white text-sm
                                inline-flex items-center gap-2 justify-center whitespace-nowrap hover:bg-blue-700 transition font-bold shadow-lg">
                            <i class="fa-solid fa-file-pdf text-base"></i>
                            PDF
                        </button>
                    </div>

                </div>
            </div>
        </div>

        <div class="bg-white/40 backdrop-blur-md p-5 rounded-2xl border border-white shadow-lg shadow-blue-900/5">
            <div id="loadingSpinner" class="text-center py-6">
                <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"></div>
                <p class="text-xs text-slate-500 mt-2 font-medium">Loading Directory...</p>
            </div>

            <div id="ticketsTableContainer" class="hidden overflow-x-auto rounded-xl border border-blue-100 bg-white/50">
                <table class="min-w-full text-left">
                    <thead>
                        <tr class="bg-blue-50/50">
                            <th class="px-4 py-3 text-xs font-bold text-blue-700 uppercase tracking-wider">ID</th>
                            <th class="px-4 py-3 text-xs font-bold text-blue-700 uppercase tracking-wider">Name</th>
                            <th class="px-4 py-3 text-xs font-bold text-blue-700 uppercase tracking-wider">Source</th>
                            <th class="px-4 py-3 text-xs font-bold text-blue-700 uppercase tracking-wider">Destination</th>
                            <th class="px-4 py-3 text-xs font-bold text-blue-700 uppercase tracking-wider">DepartureTime</th>
                            <th class="px-4 py-3 text-xs font-bold text-blue-700 uppercase tracking-wider">ArrivalTime</th>
                            <th class="px-4 py-3 text-xs font-bold text-blue-700 uppercase tracking-wider">Open</th>
                        </tr>
                    </thead>
                    <tbody id="ticketsTableBody" class="divide-y divide-blue-50 text-slate-700 text-sm">
                        </tbody>
                </table>

                <p id="noTs" class="text-center text-slate-500 py-10 hidden font-medium">
                    No students found.
                </p>
            </div>
        </div>

        <div id="alertContainer" class="fixed top-4 right-4 space-y-2 z-50"></div>
    </div>
</div>

<style>
    /* Global Theme Styles */
    .directory-page-wrapper {
        background: linear-gradient(180deg, #e0f2fe 0%, #bae6fd 100%);
        background-attachment: fixed;
    }

    .scenic-bg {
        position: fixed;
        bottom: 0; left: 0; width: 100%; height: 60vh;
        z-index: 0; pointer-events: none;
    }

    .hill {
        position: absolute; bottom: 0; width: 200%; height: 100%;
        background-repeat: repeat-x; opacity: 0.6;
    }

    .hill-1 {
        background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%237dd3fc" d="M0,160L80,176C160,192,320,224,480,213.3C640,203,800,149,960,144C1120,139,1280,181,1360,202.7L1440,224L1440,320L1360,320C1280,320,1120,320,960,320C800,320,640,320,480,320C320,320,160,320,80,320L0,320Z"></path></svg>');
        animation: moveHill 60s linear infinite;
        bottom: -50px;
    }

    .bullet-train-container {
        position: absolute; bottom: 120px; width: 100%; height: 2px;
        background: rgba(3, 105, 161, 0.1);
    }

    .bullet-train {
        position: absolute; top: -15px; left: -500px;
        display: flex; align-items: center;
        animation: highSpeedPass 12s cubic-bezier(0.45, 0.05, 0.55, 0.95) infinite;
    }

    .train-head {
        width: 70px; height: 20px;
        background: #0284c7;
        border-radius: 50% 12px 3px 3px;
    }

    .speed-lines {
        width: 120px; height: 15px;
        background: linear-gradient(90deg, transparent, rgba(2, 132, 199, 0.2));
        margin-left: -5px;
    }

    @keyframes moveHill { from { transform: translateX(0); } to { transform: translateX(-50%); } }
    @keyframes highSpeedPass { 0% { transform: translateX(-100%); } 30%, 100% { transform: translateX(200vw); } }

    /* Custom dropdown arrow for Select elements */
    select {
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%2364748b' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
        background-position: right 0.75rem center;
        background-repeat: no-repeat;
        background-size: 1.2em 1.2em;
        padding-right: 2.5rem;
    }

    #ticketsTableBody tr:hover {
        background: rgba(255, 255, 255, 0.6);
    }
</style>